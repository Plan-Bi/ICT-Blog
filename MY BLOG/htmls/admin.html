<!DOCTYPE html> 
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åå°ç®¡ç† | TechBlog</title>
  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- ç²’å­æ•ˆæœ -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <!-- Font Awesome å›¾æ ‡ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- highlight.js æ ·å¼ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/default.min.css">
  <!-- marked.js ç”¨äº Markdown è§£æ -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <!-- å¼•å…¥å¤œé—´æ¨¡å¼CSS -->
  <link rel="stylesheet" href="../css/dark-mode.css">
  <style>
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100vh;
      z-index: 1;
    }
    .admin-content {
      position: relative;
      z-index: 2;
    }
    .code-block {
      background: #f3f4f6;
      border-radius: 0.5rem;
      padding: 1rem;
      margin: 1rem 0;
      position: relative;
      font-family: monospace;
    }
    .dark-mode .code-block {
      background: #2d3748;
      color: #e2e8f0;
    }
    .copy-button {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: #4a5568;
      color: #fff;
      border: none;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      cursor: pointer;
      font-size: 0.75rem;
    }
    .tag {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      margin-right: 0.5rem;
      font-size: 0.875rem;
      border-radius: 9999px;
      background-color: #f3e8ff;
      color: #6b21a8;
    }
    .cursor-dark {
      cursor: text;
      color: #1a202c;
    }
    .dark-mode .cursor-dark {
      color: #e2e8f0;
    }
    /* ä¿®å¤é¼ æ ‡é¢œè‰²é—®é¢˜ */
    textarea, input {
      color: inherit;
    }
    textarea {
      caret-color: #000000;
    }
    /* é¢„è§ˆæ¨¡æ€æ¡†æ ·å¼ */
    #previewModal {
      background: rgba(0,0,0,0.5);
    }
    .modal-content {
      max-width: 800px;
    }
    /* èƒŒæ™¯è‰² */
    .bg-card {
      background-color: #ffffff;
    }
    .dark .bg-card {
      background-color: #2d3748;
    }
    /* é¢„è§ˆ iframe æ ·å¼ */
    iframe { 
      width: 100%; 
      height: 500px; 
      border: none;
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-800">
  <div id="particles-js"></div>

  <nav class="fixed w-full z-50 backdrop-blur">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
      <a href="../index.html" class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-500 bg-clip-text text-transparent">CyberLab</a>
      <div class="space-x-8">
        <button onclick="logout()" class="text-red-500 hover:text-red-700">
          <i class="fas fa-sign-out-alt mr-2"></i>é€€å‡ºç™»å½•
        </button>
        <button onclick="toggleDarkMode()" class="px-3 py-1 rounded bg-gray-200 dark:bg-gray-700">ğŸŒ“</button>
      </div>
    </div>
  </nav>

  <div class="admin-content container mx-auto pt-32 px-6">
    <div class="bg-white dark:bg-gray-700 p-8 rounded-2xl shadow-lg">
      <!-- åˆ†ç±»åˆ‡æ¢ -->
      <div class="flex mb-6 border-b dark:border-gray-600">
        <button class="tab-btn px-4 py-2 border-b-2 border-purple-600 text-purple-600" data-type="post" onclick="setCurrentType('post')">æ–‡ç« ç®¡ç†</button>
        <button class="tab-btn px-4 py-2 border-b-2 border-transparent text-gray-500 hover:text-purple-600" data-type="activity" onclick="setCurrentType('activity')">åŠ¨æ€ç®¡ç†</button>
      </div>

      <!-- æœç´¢æ¡† -->
      <div class="flex mb-4">
        <input type="text" id="searchInput" class="w-full p-2 border rounded dark:bg-gray-600 bg-card" placeholder="æœç´¢æ–‡ç« ...">
        <button onclick="loadContents()" class="ml-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">æœç´¢</button>
      </div>

      <!-- æ–‡ç« ç¼–è¾‘åŒºåŸŸ -->
      <div class="input-group mb-8 p-4 border rounded dark:border-gray-600 bg-card">
        <input type="text" id="contentTitle" class="w-full p-3 mb-4 border rounded dark:bg-gray-600 cursor-dark" placeholder="è¯·è¾“å…¥æ ‡é¢˜" required>

        <div class="mb-4">
          <div id="tagsContainer" class="flex flex-wrap gap-2 mb-2"></div>
          <input type="text" id="tagInput" class="w-full p-2 border rounded dark:bg-gray-600 cursor-dark" placeholder="è¾“å…¥æ ‡ç­¾ï¼ŒæŒ‰å›è½¦æ·»åŠ ">
        </div>

        <div class="flex flex-wrap gap-2 mb-4">
          <button type="button" onclick="insertMedia('image')" class="px-3 py-1 bg-blue-100 text-blue-600 rounded">
            <i class="fas fa-image mr-2"></i>å›¾ç‰‡
          </button>
          <button type="button" onclick="insertMedia('video')" class="px-3 py-1 bg-green-100 text-green-600 rounded">
            <i class="fas fa-video mr-2"></i>è§†é¢‘
          </button>
          <button type="button" onclick="insertMedia('code')" class="px-3 py-1 bg-purple-100 text-purple-600 rounded">
            <i class="fas fa-code mr-2"></i>ä»£ç 
          </button>
          <button type="button" onclick="insertMedia('file')" class="px-3 py-1 bg-yellow-100 text-yellow-600 rounded">
            <i class="fas fa-file mr-2"></i>æ–‡ä»¶
          </button>
        </div>

        <textarea id="contentBody" class="w-full h-64 p-4 border rounded dark:bg-gray-600 font-mono cursor-dark" placeholder="è¯·è¾“å…¥å†…å®¹ï¼ˆæ”¯æŒ Markdown è¯­æ³•ï¼‰..."></textarea>

        <div class="flex justify-end gap-4 mt-4">
          <button type="button" onclick="previewMarkdown()" class="px-4 py-2 border border-purple-600 text-purple-600 rounded">
            <i class="fas fa-eye mr-2"></i>é¢„è§ˆ Markdown
          </button>
          <button type="button" onclick="saveContent()" class="px-6 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">
            <i class="fas fa-save mr-2"></i>ä¿å­˜å¹¶ç”Ÿæˆç½‘é¡µ
          </button>
        </div>
      </div>

      <!-- å·²ä¿å­˜æ–‡ç« åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰ -->
      <div id="contentList" class="space-y-4"></div>
    </div>
  </div>

  <!-- é¢„è§ˆæ¨¡æ€æ¡†ï¼ˆä½¿ç”¨ iframe æ˜¾ç¤ºå®Œæ•´ç”Ÿæˆé¡µé¢ï¼‰ -->
  <div id="previewModal" class="hidden fixed inset-0 bg-black/50 z-50">
    <div class="modal-content bg-white dark:bg-gray-800 p-6 rounded-lg max-w-3xl mx-auto mt-20">
      <div class="flex justify-between mb-4">
        <h3 class="text-xl font-bold">å†…å®¹é¢„è§ˆ</h3>
        <button onclick="document.getElementById('previewModal').classList.add('hidden')" class="text-gray-500 hover:text-gray-700">âœ•</button>
      </div>
      <iframe id="previewFrame"></iframe>
      <div class="mt-4 text-right">
        <button onclick="downloadArticle()" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">ä¸‹è½½ç½‘é¡µæ–‡ä»¶</button>
      </div>
    </div>
  </div>

  <!-- highlight.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
  <script>
    let currentType = 'post'; // é»˜è®¤æ–‡ç« ç®¡ç†
    let currentTags = [];
    let editingId = null;
    let previewHTML = ""; // ç”¨äºä¿å­˜ç”Ÿæˆçš„æœ€ç»ˆæ–‡ç« HTML

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      loadContents();
      initParticles();
    });

    // è®¾ç½®å½“å‰ç±»å‹ï¼ˆæ–‡ç« æˆ–åŠ¨æ€ï¼‰
    function setCurrentType(type) {
      currentType = type;
      loadContents();
      updateTabStyle();
    }
    function updateTabStyle() {
      document.querySelectorAll('.tab-btn').forEach(btn => {
        if (btn.dataset.type === currentType) {
          btn.classList.add('border-purple-600', 'text-purple-600');
          btn.classList.remove('border-transparent', 'text-gray-500');
        } else {
          btn.classList.remove('border-purple-600', 'text-purple-600');
          btn.classList.add('border-transparent', 'text-gray-500');
        }
      });
    }

    // è‡ªå®šä¹‰ marked æ¸²æŸ“å™¨ï¼Œç”¨äºå¤„ç†é“¾æ¥ï¼ˆè§†é¢‘ã€æ–‡ä»¶ï¼‰è¯­æ³•
    function getCustomRenderer() {
      const renderer = new marked.Renderer();
      renderer.link = function(href, title, text) {
        if (text.toLowerCase() === 'video') {
          return `<video controls src="${href}" style="max-width:100%;"></video>`;
        } else if (text.toLowerCase() === 'file') {
          return `<a href="${href}" download style="color:blue;">ç‚¹å‡»ä¸‹è½½æ–‡ä»¶</a>`;
        } else {
          return `<a href="${href}" title="${title || ''}">${text}</a>`;
        }
      };
      return renderer;
    }

    // ä¿å­˜æ–‡ç« ï¼šä¿å­˜åˆ° localStorage å¹¶ç”Ÿæˆæœ€ç»ˆé¡µé¢ HTMLï¼Œç„¶åè°ƒç”¨é¢„è§ˆæ¨¡æ€æ¡†å¹¶è‡ªåŠ¨ä¸‹è½½æ–‡ä»¶
    function saveContent() {
      const title = document.getElementById('contentTitle').value.trim();
      const body = document.getElementById('contentBody').value.trim();
      if (!title || !body) {
        alert("æ ‡é¢˜å’Œå†…å®¹ä¸èƒ½ä¸ºç©ºï¼");
        return;
      }
      const currentDate = new Date().toLocaleString();
      if (confirm("ç¡®å®šä¿å­˜å¹¶ç”Ÿæˆç½‘é¡µå—ï¼Ÿ")) {
        const content = { id: editingId || Date.now(), title, body, tags: currentTags, date: currentDate, type: currentType };
        let contents = JSON.parse(localStorage.getItem('contents')) || [];
        if (editingId) {
          const index = contents.findIndex(item => item.id === editingId);
          contents[index] = content;
        } else {
          contents.unshift(content);
        }
        localStorage.setItem('contents', JSON.stringify(contents));
        alert("ä¿å­˜æˆåŠŸï¼");
        loadContents();
        resetForm();
        // ç”Ÿæˆæœ€ç»ˆæ–‡ç« é¡µé¢ HTML å†…å®¹ï¼ˆä¸é˜…è¯»è¯¦æƒ…é¡µä¸€è‡´ï¼‰
        previewHTML = generateArticlePage(content);
        showPreviewModal(previewHTML);
        // è‡ªåŠ¨è§¦å‘ä¸‹è½½ï¼Œæ–¹ä¾¿æ‰‹åŠ¨ç§»åŠ¨åˆ° posts æ–‡ä»¶å¤¹
        downloadArticle();
      }
    }

    // ç”Ÿæˆæ–‡ç« é¡µé¢ HTMLï¼ˆå®Œæ•´çš„ HTML æ–‡æ¡£ï¼‰ï¼Œæ ·å¼å‚è€ƒé˜…è¯»è¯¦æƒ…é¡µ
    function generateArticlePage(content) {
      const renderer = getCustomRenderer();
      const processedBody = marked.parse(content.body, { renderer: renderer });
      return `<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TechBlog | æ–‡ç« è¯¦æƒ…</title>
  <script src="https://cdn.tailwindcss.com"><\/script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="../css/dark-mode.css">
  <style>
    body {
      transition: background-color 0.3s, color 0.3s;
      background-color: #f7fafc;
      color: #2d3748;
    }
    nav {
      background: var(--nav-bg, rgba(255,255,255,0.9));
    }
    .content-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 1.5rem;
      padding-top: 100px;
    }
    .article-title {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    .article-tags {
      font-size: 1rem;
      color: #718096;
      margin-bottom: 1rem;
    }
    .article-content {
      line-height: 1.8;
      font-size: 1.125rem;
      white-space: pre-wrap;
      word-break: break-word;
      max-width: 800px;
      margin: 0 auto;
    }
    .article-content p {
      //é¦–èˆªç¼©è¿›text-indent: 2em; 
      margin: 0.5em 0;
    }
    .article-date {
      font-size: 0.875rem;
      color: #a0aec0;
      margin-top: 1.5rem;
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-800">
  <nav class="fixed w-full z-50 backdrop-blur">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
      <a href="../index.html" class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-500 bg-clip-text text-transparent">CyberLab</a>
      <div class="space-x-6">
        <a href="about.html" class="hover:text-blue-500 font-medium">å…³äºæˆ‘</a>
        <a href="posts.html" class="hover:text-blue-500 font-medium">æ–‡ç« </a>
        <a href="activity.html" class="hover:text-blue-500 font-medium">åŠ¨æ€</a>
        <a href="friends.html" class="hover:text-blue-500 font-medium">å‹æƒ…é“¾æ¥</a>
      </div>
    </div>
  </nav>
  <div class="content-container">
    <h1 class="article-title">${content.title}</h1>
    <div class="article-tags">æ ‡ç­¾ï¼š ${content.tags.join(', ')}</div>
    <div class="article-content">
      ${processedBody}
    </div>
    <div class="article-date">å‘å¸ƒäºï¼š ${content.date}</div>
  </div>
  <script>
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark-mode');
    }
  <\/script>
</body>
</html>`;
    }

    // ä¸‹è½½æ–‡ç« æ–‡ä»¶ï¼ˆé€šè¿‡ Blob è§¦å‘æ–‡ä»¶ä¸‹è½½ï¼‰ï¼Œæ–‡ä»¶åæ ¼å¼ä¸º post_æ—¶é—´æˆ³.html
    function downloadArticle() {
      if (!previewHTML) {
        alert("è¯·å…ˆä¿å­˜å¹¶ç”Ÿæˆæ–‡ç« ï¼");
        return;
      }
      const filename = `post_${Date.now()}.html`;
      const blob = new Blob([previewHTML], { type: 'text/html' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      alert(`æ–‡ä»¶å·²ä¸‹è½½ï¼Œè¯·å°†æ–‡ä»¶æ‰‹åŠ¨ç§»åŠ¨åˆ° posts æ–‡ä»¶å¤¹`);
    }

    // æ˜¾ç¤ºé¢„è§ˆæ¨¡æ€æ¡†ï¼šå°†ç”Ÿæˆçš„å®Œæ•´ HTML è®¾ç½®ç»™ iframe çš„ srcdoc
    function showPreviewModal(html) {
      const previewFrame = document.getElementById('previewFrame');
      previewFrame.srcdoc = html;
      document.getElementById('previewModal').classList.remove('hidden');
    }

    // Markdown é¢„è§ˆï¼ˆä»…é¢„è§ˆç¼–è¾‘åŒºå†…å®¹ï¼Œä¸å«å®Œæ•´ HTML æ¡†æ¶ï¼‰ï¼Œæ‰“å¼€æ–°çª—å£é¢„è§ˆæ—¶ä¿ç•™æ ¼å¼
    function previewMarkdown() {
      const title = document.getElementById('contentTitle').value.trim();
      const body = document.getElementById('contentBody').value;
      if (!title || !body) {
        alert("è¯·å…ˆå¡«å†™æ ‡é¢˜å’Œå†…å®¹ï¼");
        return;
      }
      const renderer = getCustomRenderer();
      const markdownContent = `# ${title}\n\næ ‡ç­¾ï¼š ${currentTags.join(', ')}\n\n${body}`;
      const htmlContent = marked.parse(markdownContent, { renderer: renderer });
      const previewHTML = `<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Markdown é¢„è§ˆ</title>
  <style>
    body { 
      padding: 2rem; 
      font-family: sans-serif; 
      background-color: #f7fafc; 
      color: #2d3748; 
    }
    .content { 
      white-space: pre-wrap;
      max-width: 800px;
      margin: 0 auto; 
      line-height: 1.6;
      word-break: break-word;
    }
    .content p { 
      //é¦–èˆªç¼©è¿›text-indent: 2em; 
      margin: 0.5em 0;
    }
  </style>
</head>
<body>
  <div class="content">
    ${htmlContent}
  </div>
</body>
</html>`;
      const win = window.open("", "_blank");
      win.document.write(previewHTML);
      win.document.close();
    }

    // åŠ è½½æ–‡ç« åˆ—è¡¨ï¼ˆé€šè¿‡ localStorage ä¿å­˜çš„å†…å®¹ï¼‰
    function loadContents() {
      const searchQuery = document.getElementById('searchInput').value.toLowerCase();
      const contents = JSON.parse(localStorage.getItem('contents')) || [];
      const filtered = contents.filter(item => item.title.toLowerCase().includes(searchQuery) && item.type === currentType);
      const contentList = document.getElementById('contentList');
      contentList.innerHTML = filtered.map(item => `
        <div class="group p-4 border rounded dark:border-gray-600 mb-4">
          <div class="flex justify-between items-start">
            <div class="flex-1">
              <h3 class="text-lg font-bold mb-1">${item.title}</h3>
              <div class="prose dark:prose-dark">${item.body.substring(0, 100)}...</div>
              <div class="mt-2">
                ${item.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
              </div>
              <p class="text-xs text-gray-500 mt-2">å‘å¸ƒäº: ${item.date}</p>
            </div>
            <div class="flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
              <button onclick="editContent(${item.id})" class="text-blue-500 hover:text-blue-700">ç¼–è¾‘</button>
              <button onclick="deleteContent(${item.id})" class="text-red-500 hover:text-red-700">åˆ é™¤</button>
              <button onclick="downloadSpecificArticle(${item.id})" class="text-green-500 hover:text-green-700">ä¸‹è½½</button>
            </div>
          </div>
        </div>
      `).join('');
    }

    function downloadSpecificArticle(id) {
      const contents = JSON.parse(localStorage.getItem('contents')) || [];
      const content = contents.find(item => item.id === id);
      if (!content) {
        alert("æœªæ‰¾åˆ°è¯¥æ–‡ç« ï¼");
        return;
      }
      const articleHTML = generateArticlePage(content);
      const filename = `post_${content.id}.html`;
      const blob = new Blob([articleHTML], { type: 'text/html' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      alert(`æ–‡ä»¶ ${filename} å·²ä¸‹è½½ï¼Œè¯·å°†æ–‡ä»¶æ‰‹åŠ¨ç§»åŠ¨åˆ° posts/activity æ–‡ä»¶å¤¹`);
    }

    // ç¼–è¾‘æ–‡ç« ï¼šå¡«å……è¡¨å•
    function editContent(id) {
      const contents = JSON.parse(localStorage.getItem('contents')) || [];
      const content = contents.find(item => item.id === id);
      document.getElementById('contentTitle').value = content.title;
      document.getElementById('contentBody').value = content.body;
      currentTags = content.tags || [];
      renderTags();
      editingId = content.id;
    }

    // åˆ é™¤æ–‡ç« 
    function deleteContent(id) {
      if (confirm("ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ")) {
        let contents = JSON.parse(localStorage.getItem('contents')) || [];
        contents = contents.filter(item => item.id !== id);
        localStorage.setItem('contents', JSON.stringify(contents));
        alert("æ–‡ç« å·²åˆ é™¤ï¼");
        loadContents();
      }
    }

    // æ¸²æŸ“æ ‡ç­¾
    function renderTags() {
      const tagsContainer = document.getElementById('tagsContainer');
      tagsContainer.innerHTML = '';
      currentTags.forEach(tag => {
        const span = document.createElement('span');
        span.classList.add('tag');
        span.textContent = tag;
        tagsContainer.appendChild(span);
      });
    }

    // æ’å…¥å¤šåª’ä½“ä»£ç 
    function insertMedia(type) {
      const textarea = document.getElementById('contentBody');
      let insertText = '';
      switch (type) {
        case 'image':
          const imgUrl = prompt('è¯·è¾“å…¥å›¾ç‰‡URL:');
          if (imgUrl) insertText = `![å›¾ç‰‡æè¿°](${imgUrl})\n`;
          break;
        case 'video':
          const videoUrl = prompt('è¯·è¾“å…¥è§†é¢‘URL:');
          if (videoUrl) insertText = `[video](${videoUrl})\n`;
          break;
        case 'code':
          insertText = "\n```\n// åœ¨è¿™é‡Œè¾“å…¥ä»£ç \n```\n";
          break;
        case 'file':
          const fileUrl = prompt('è¯·è¾“å…¥æ–‡ä»¶URL:');
          if (fileUrl) insertText = `[file](${fileUrl})\n`;
          break;
      }
      textarea.value += insertText;
    }

    // é€€å‡ºç™»å½•
    function logout() {
      if (confirm("ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ")) {
        alert("å·²é€€å‡ºç™»å½•ï¼");
        localStorage.removeItem('isLoggedIn');
        window.location.href = 'login.html';
      }
    }

    // ç²’å­èƒŒæ™¯åˆå§‹åŒ–
    function initParticles() {
      particlesJS('particles-js', {
        particles: {
          number: { value: 80 },
          color: { value: '#ffffff' },
          shape: { type: 'circle' },
          opacity: { value: 0.5 },
          size: { value: 3 },
          move: { enable: true, speed: 2, direction: 'none', random: false, straight: false, out_mode: 'out' }
        }
      });
    }

    // æ ‡ç­¾è¾“å…¥å¤„ç†
    document.getElementById('tagInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        const tag = this.value.trim();
        if (tag && !currentTags.includes(tag)) {
          currentTags.push(tag);
          renderTags();
          this.value = '';
        }
      }
    });

    // ä¿è¯æ–‡ä»¶ç§»åŠ¨åå®ç°æ•°æ®æ¢å¤
    function restoreArticlesFromBackup() {
      fetch('./posts/articles-backup.json')
        .then(response => response.json())
        .then(data => {
          localStorage.setItem('articles', JSON.stringify(data));
          console.log('æ–‡ç« æ•°æ®å·²æ¢å¤');
          location.reload();
        })
        .catch(error => console.error('æ— æ³•æ¢å¤æ–‡ç« æ•°æ®', error));
    }

    // å¦‚æœ LocalStorage ä¸ºç©ºï¼Œåˆ™è‡ªåŠ¨æ¢å¤
    document.addEventListener('DOMContentLoaded', function() {
      if (!localStorage.getItem('articles')) {
        restoreArticlesFromBackup();
      }
    });
  </script>
  <!-- å¼•å…¥ç²’å­åº“å’Œå¤œé—´æ¨¡å¼JSï¼ˆå¦‚æœ‰é¢å¤–JSï¼Œå¯æ”¾æ­¤å¤„ï¼‰ -->
  <script src="../js/dark-mode.js"></script>
</body>
</html>
